app-id: com.gitlab.screenkey.screenkey
runtime: org.gnome.Platform
runtime-version: '3.36'
sdk: org.gnome.Sdk
command: screenkey
rename-desktop-file: screenkey.desktop
finish-args:
  - --device=dri
  - --share=ipc
  - --socket=wayland
  - --socket=x11
modules:
  - name: screenkey
    buildsystem: simple
    ensure-writable:
      - /lib/python3.7/site-packages/easy-install.pth
    build-commands:
      - python3 setup.py build
      - python3 setup.py install --skip-build --prefix=/app
      - install -D data/screenkey.desktop /app/share/applications/screenkey.desktop
    sources:
      - type: git
        url: https://gitlab.com/screenkey/screenkey
        branch: master
    modules:
      - name: python-distutils-extra
        cleanup:
          - '*'
        buildsystem: simple
        build-commands:
          - python3 setup.py install --prefix=/app
        sources:
          - type: archive
            url: https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz
            sha256: 723f24f4d65fc8d99b33a002fbbb3771d4cc9d664c97085bf37f3997ae8063af
        modules:
          - shared-modules/intltool/intltool-0.51.json
